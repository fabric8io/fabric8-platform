metadata:
  annotations:
    expose.config.fabric8.io/apiserver-url-key: apiserver.url
    expose.service-key.config.fabric8.io/fabric8: fabric8.url
    expose.service-key.config.fabric8.io/keycloak: keycloak.url
    expose.service-key.config.fabric8.io/wit: wit.api.url
data:
  db.url: keycloak-db
  db.port: 5432
  apiserver.url: http://kubernetes
  fabric8.url: http://fabric8
  keycloak.url: http://keycloak
  wit.api.url: http://wit
  fabric8-realm.json: |-
    {
      "realm": "fabric8",
      "enabled": true,
      "loginTheme": "fabric8",
      "sslRequired": "external",
      "realm-private-key": "MIICXAIBAAKBgQCrVrCuTtArbgaZzL1hvh0xtL5mc7o0NqPVnYXkLvgcwiC3BjLGw1tGEGoJaXDuSaRllobm53JBhjx33UNv+5z/UMG4kytBWxheNVKnL6GgqlNabMaFfPLPCF8kAgKnsi79NMo+n6KnSY8YeUmec/p2vjO2NjsSAVcWEQMVhJ31LwIDAQABAoGAfmO8gVhyBxdqlxmIuglbz8bcjQbhXJLR2EoS8ngTXmN1bo2L90M0mUKSdc7qF10LgETBzqL8jYlQIbt+e6TH8fcEpKCjUlyq0Mf/vVbfZSNaVycY13nTzo27iPyWQHK5NLuJzn1xvxxrUeXI6A2WFpGEBLbHjwpx5WQG9A+2scECQQDvdn9NE75HPTVPxBqsEd2z10TKkl9CZxu10Qby3iQQmWLEJ9LNmy3acvKrE3gMiYNWb6xHPKiIqOR1as7L24aTAkEAtyvQOlCvr5kAjVqrEKXalj0Tzewjweuxc0pskvArTI2Oo070h65GpoIKLc9jf+UA69cRtquwP93aZKtW06U8dQJAF2Y44ks/mK5+eyDqik3koCI08qaC8HYq2wVl7G2QkJ6sbAaILtcvD92ToOvyGyeE0flvmDZxMYlvaZnaQ0lcSQJBAKZU6umJi3/xeEbkJqMfeLclD27XGEFoPeNrmdx0q10Azp4NfJAY+Z8KRyQCR2BEG+oNitBOZ+YXF9KCpH3cdmECQHEigJhYg+ykOvr1aiZUMFT72HU0jnmQe2FVekuG+LJUt2Tm7GtMjTFoGpf0JwrVuZN39fOYAlo+nTixgeW7X8Y=",
      "realm-public-key": "MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCrVrCuTtArbgaZzL1hvh0xtL5mc7o0NqPVnYXkLvgcwiC3BjLGw1tGEGoJaXDuSaRllobm53JBhjx33UNv+5z/UMG4kytBWxheNVKnL6GgqlNabMaFfPLPCF8kAgKnsi79NMo+n6KnSY8YeUmec/p2vjO2NjsSAVcWEQMVhJ31LwIDAQAB",
      "clients": [
        {
          "clientId": "fabric8-online-platform",
          "clientSecret": "9ec9e27c-e6d7-48a2-92d1-c6b15355e589",
          "enabled": true,
          "publicClient" : true,
          "adminUrl": "/",
          "baseUrl": "/",
          "redirectUris": [
            "http://localhost:8080/api/login/*",
            "${WIT_URL}*",
            "${KEYCLOAK_URL}/"
          ],
          "fullScopeAllowed": true,
          "directAccessGrantsEnabled": true,
          "webOrigins": [
            "*"
          ]
        }
      ],
      "users" : [
        {
          "username" : "testuser",
          "enabled": true,
          "email" : "testuser@admin.com",
          "firstName": "Test",
          "lastName": "User",
          "credentials" : [
            { "type" : "password",
              "value" : "almighty" }
          ],
          "realmRoles": [ "user","admin" ],
          "clientRoles": {
            "realm-management": [ "realm-admin"],
            "broker": ["read-token"]
          }
        }
      ],
      "roles" : {
        "realm" : [
          {
            "name": "read:space",
            "description": "Read space"
          },
          {
            "name": "admin:space",
            "description": "Admin space"
          }
        ]
      },
      "identityProviders": [
        {
          "alias" : "openshift-v3",
          "providerId" : "openshift-v3",
          "enabled": true,
          "updateProfileFirstLogin" : "true",
          "storeToken" : "true",
          "addReadTokenRoleOnCreate" : true,
          "config": {
            "baseUrl": "${K8S_API_SERVER}",
            "clientId": "fabric8-online-platform",
            "clientSecret": "fabric8"
          }
        }
      ]
    }
